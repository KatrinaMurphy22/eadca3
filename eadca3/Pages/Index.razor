@page "/"

@inject HttpClient Http


<PageTitle>Cats</PageTitle>


@if (data == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <h1>Cats</h1>

    @foreach (var entry in data)
    {
        
        <img src="@entry.url" width="500" height="600" />
        <button class="btn btn-primary" @onclick="entry.LikeCat">Like!</button>
        <p role="status">Likes: @entry.favCount</p>
    }


}


@code {
    private Cats[] data;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            data = await Http.GetFromJsonAsync<Cats[]>("https://api.thecatapi.com/v1/images/search?limit=50&api_key=live_ZkrwaSSO3rrHcXFVGYQJ9IhvRMi6xGuDcUXRM24aKUZwy8OWWOm0ler41bycfPFF");
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            throw e;
        }

    }

    public class Cats
    {

        public List<object> breeds { get; set; }
        public string id { get; set; }
        public string url { get; set; }
        public int width { get; set; }
        public int height { get; set; }
        public int favCount { get; set; }

        public void LikeCat()
        {
            favCount++;
        }

        public void Sort()
        {
            
        }
    }

}
