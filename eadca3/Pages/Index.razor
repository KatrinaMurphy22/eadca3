@page "/"
@inject HttpClient Http

<PageTitle>Cats</PageTitle>

@if (data == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <thead>
            <tr>
                <th>Image</th>
                <th>Width</th>
                <th>Height</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in data)
            {
                <tr>
                    <td><img src="@entry.url" width="500" height="600"></td>
                    <td>@entry.width</td>
                    <td>@entry.height</td>
                </tr>

            }
        </tbody>
    </table>

    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Example of using theCatAPI.com to show a grid of cropped Kitties</title>
    </head>
    <body>
        <div class="maincontent">
            <div id="grid" class="imgrid"></div>
        </div>
    </body>
</html>
}


@code {
    private Cats[] data;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            data = await Http.GetFromJsonAsync<Cats[]>("https://api.thecatapi.com/v1/images/search?limit=10&api_key=live_ZkrwaSSO3rrHcXFVGYQJ9IhvRMi6xGuDcUXRM24aKUZwy8OWWOm0ler41bycfPFF");
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            throw e;
        }

    }

    public class Cats
    {

        public List<object> breeds { get; set; }
        public string id { get; set; }
        public string url { get; set; }
        public int width { get; set; }
        public int height { get; set; }
    }
}
